% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/bagging.R
\name{score_fastsvm_bagging}
\alias{score_fastsvm_bagging}
\title{Concordance index for a fastsvm_bagging ensemble}
\usage{
score_fastsvm_bagging(object, data)
}
\arguments{
\item{object}{An object of class \code{"fastsvm_bagging"}.}

\item{data}{A \code{data.frame} containing \code{object$time_col},
\code{object$delta_col}, and all covariates used in training.}
}
\value{
A single numeric value with the estimated concordance index.
}
\description{
Compute the concordance index (C-index) for a \code{"fastsvm_bagging"}
model on a given dataset, using the aggregated ensemble predictions.
}
\details{
IMPORTANT:
\itemize{
  \item If \code{rank_ratio = 1}, predictions are **risk scores**
        (larger = higher risk → shorter survival).

  \item If \code{rank_ratio < 1}, predictions are **transformed survival times**
        (larger = longer survival).  
        In this case, the predictions are multiplied by \code{-1} before
        computing the C-index, because scikit-survival requires
        “larger = higher risk”.
}

Internally, this uses \code{sksurv.metrics.concordance_index_censored}
through \pkg{reticulate}.
}
\examples{
if (reticulate::py_module_available("sksurv")) {

  ## ------------------------------------------------------------
  ## Example 1: Bagging with fixed RBF kernel (pure regression)
  ## ------------------------------------------------------------
  set.seed(123)
  df <- data_generation(n = 250, prop_cen = 0.15)

  bag_rbf <- fastsvm_bagging_fit(
    data         = df,
    time_col     = "tempo",
    delta_col    = "cens",
    n_estimators = 10,
    mtry         = 2,
    kernels      = "rbf",
    alpha        = 1,
    rank_ratio   = 0
  )

  c_rbf <- score_fastsvm_bagging(bag_rbf, df)
  c_rbf


  ## ------------------------------------------------------------
  ## Example 2: Bagging mixing kernels (RBF + user-defined wavelet)
  ## ------------------------------------------------------------

  # wavelet mother function
  wavelet_mother <- function(u) {
    cos(1.75 * u) * exp(-0.5 * u^2)
  }

  # wavelet kernel with parameter A
  wavelet_kernel <- function(x, z, A = 1) {
    x <- as.numeric(x); z <- as.numeric(z)
    u <- (x - z) / A
    prod(wavelet_mother(u))
  }

  # factory for wavelet kernel
  make_wavelet_kernel <- function(A = 1) {
    force(A)
    function(x, z) wavelet_kernel(x, z, A = A)
  }

  kernels_list <- list(
    "rbf",
    make_wavelet_kernel(A = 0.5)
  )

  bag_mix <- fastsvm_bagging_fit(
    data         = df,
    time_col     = "tempo",
    delta_col    = "cens",
    n_estimators = 12,
    mtry         = 2,
    kernels      = kernels_list,
    kernel_prob  = c(0.6, 0.4),
    alpha        = 1,
    rank_ratio   = 0
  )

  c_mix <- score_fastsvm_bagging(bag_mix, df)
  c_mix

}

}
